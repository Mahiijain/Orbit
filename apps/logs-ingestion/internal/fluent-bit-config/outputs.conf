# outputs.conf
# Output configurations for processed logs

# Output to stdout for debugging (remove in production)
[OUTPUT]
    name         stdout
    match        logs.*
    format       json_lines

# Output to file for archival
[OUTPUT]
    name         file
    match        logs.*
    path         ./processed_logs/
    file         synthetic-logs.jsonl
    format       json_lines

# Output to Kafka
[OUTPUT]
    name        kafka
    match       logs.*
    brokers     kafka-broker:9092
    topics      synthetic-logs
    format      json
    retry_limit 5

# Output to Elasticsearch (uncomment and configure as needed)
# [OUTPUT]
#     name            es
#     match           logs.*
#     host            elasticsearch-host
#     port            9200
#     index           synthetic-logs
#     type            _doc
#     logstash_format on
#     logstash_prefix synthetic-logs
#     logstash_dateformat %Y.%m.%d
#     include_tag_key on
#     tag_key         @tag
#     retry_limit     5

# Output to Prometheus metrics (for monitoring)
[OUTPUT]
    name          prometheus_exporter
    match         logs.*
    host          0.0.0.0
    port          2021
    add_label     service fluent-bit
    add_label     environment synthetic

# Output errors to separate topic/index for alerting
[OUTPUT]
    name        kafka
    match       logs.*
    match_regex level\s+(ERROR|CRITICAL)
    brokers     kafka-broker:9092
    topics      synthetic-logs-errors
    format      json
    retry_limit 5